"use strict";!function(e){e((function(){var n=Object.fromEntries(window.location.search.slice(1).split("&").map((function(e){return e.split("=")}))),t=e(document.body),a=function(e){var t,a;void 0===e&&(e=".js-stancer-change-payment-method"),o();var c={nonce:null===(t=stancer_data.changePaymentMethod)||void 0===t?void 0:t.nonce,subscription:n.change_payment_method,action:"initiate"},r={path:"/stancer/v1/change_payment_method/initiate",url:null===(a=stancer_data.changePaymentMethod)||void 0===a?void 0:a.url};window.stancer_onSubmit({button:e,route:r,data:c})},o=function(){var a,o;window.stancer_callServer({data:{nonce:null===(a=stancer_data.changePaymentMethod)||void 0===a?void 0:a.nonce,subscription:n.change_payment_method,action:"information"},responseCallBack:function(n){"success"==n.result?function(n){var t;e("#payment .payment_method_stancer label[for=payment_method_stancer]").text(null!==(t=n.card)&&void 0!==t?t:"")}(n):function(e){t.trigger("checkout_error",e.reason)}(n)},route:{path:"/stancer/v1/change_payment_method/information",url:null===(o=stancer_data.changePaymentMethod)||void 0===o?void 0:o.url}})},c=function(n){return void 0===n&&(n=".js-stancer-change-payment-method"),!!e(n).length},r=function(t){var a,o;if("finished"!==t.status&&"error"!==t.status)return!1;var c={nonce:null===(a=stancer_data.changePaymentMethod)||void 0===a?void 0:a.nonce,subscription:n.change_payment_method,action:"validate"};return window.stancer_callServer({data:c,responseCallBack:function(n){"success"==n.result&&function(n){n.card&&e("#order_review .shop_table tfoot tr:nth-child(2) td.product-total").text(n.card),e("#payment").empty()}(n),function(n){if(n.messages){var t=e(document.createElement("div")).html(n.messages),a=e(".woocommerce-notices-wrapper");a.remove(".wc-block-components-notice-banner, .woocommerce-error, .woocommerce-info"),t.addClass("success"===n.result?"woocommerce-info":"woocommerce-error"),a.append(t)}}(n)},route:{path:"/stancer/v1/change_payment_method/validate",url:null===(o=stancer_data.changePaymentMethod)||void 0===o?void 0:o.url}}),!0};window.stancer_paymentMethodHasBeenChanged=function(e){return c()&&r(e)},window.stancer_changePaymentMethodOrCallback=function(e){return c()?a:e}}))}(jQuery);